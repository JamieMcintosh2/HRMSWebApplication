<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="baseStyle.css">
    <link rel="stylesheet" href="navCSS.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://kit.fontawesome.com/13f35877d6.js" crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<body class="w3-light-grey">
    <header class="testHead">
        <a href="#" class="logo">
          <img src="logo.png" alt="Logo">
        </a>
    
        <input type="checkbox" id="check">
        <label for="check" class="burgerIcon">
          <i class="fa-solid fa-bars" id="menu-icon"></i>
          <i class="fa-solid fa-xmark" id="close-icon"></i>
    
        </label>
    
        <nav class = "navyBar">
          <a href="EmployeeList.html" style="--i:0">Manage Employees</a>
          <a href="createEmployee.html" style="--i:1">New Employee</a>
          <a href="generateContent.html" style="--i:2">Recruitment</a>
          <a href="manageJobs.html" style="--i:3"> Manage Jobs</a>
          <a href="manageOffices.html" style="--i:4">Manage Offices</a>
        </nav>
    
      </header>
  


    <!-- Page Container -->
    <div class="w3-content w3-margin-top" style="max-width:1400px; padding-bottom: 10%;" onclick="w3_close()">
        <div class="w3-container w3-card w3-teal">
            <h1>New Employee</h1>
        </div>
        <div class="w3-white w3-text-grey w3-card-4">
            <div class="w3-container">
                <h2 class="w3-text-grey w3-padding-16"><i class="fa fa-user fa-fw w3-margin-right w3-xxlarge w3-text-teal"></i>Personal Info</h2>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter First Name" id="fName" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter Last Name" id="lName" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="date" id="DOB" style="width: 50%; margin-bottom: 2%;" required>
                <!--<select class="w3-select w3-border" id="pExtension" style="width: 15%; margin-bottom: 1%;" required>
                    <option value="" disabled selected></option>-->
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter Phone Number" id="pNumber" style="width: 50%; margin-bottom: 2%;" required>
                <hr>
                <h2 class="w3-text-grey w3-padding-16"><i class="fa fa-home fa-fw w3-margin-right w3-xxlarge w3-text-teal"></i>Home Address</h2>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter House Number" id="houseNum" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter Street Name" id="Street" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter Postcode" id="Postcode" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter City" id="City" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter Country" id="Country" style="width: 50%; margin-bottom: 2%;" required>
                <hr>
                <h2 class="w3-text-grey w3-padding-16"><i class="fa fa-heartbeat fa-fw w3-margin-right w3-xxlarge w3-text-teal"></i>Emergency Contact</h2>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter First Name" id="emergFName" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter Last Name" id="emergLName" style="width: 50%; margin-bottom: 2%;" required>
                <select class="w3-select w3-border" name="relationship" style="width: 50%; margin-bottom: 2%;" required>
                    <option value="" disabled selected>Select Relationship</option>
                    <option value="1">Father</option>
                    <option value="2">Mother</option>
                    <option value="3">Partner</option>
                    <option value="4">Wife</option>
                    <option value="5">Husband</option>
                    <option value="6">Other</option>
                  </select>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter Phone Number" id="emergPNumber" style="width: 50%; margin-bottom: 2%;" required>
                <hr>
                <button onclick="EmployeeInfo()" class="w3-btn w3-teal">Continue</button>

                <div id="id01" class="w3-modal">
                    <div class="w3-modal-content w3-card-4">
                      <header class="w3-container w3-teal"> 
                        <span onclick="document.getElementById('id01').style.display='none'" class="w3-button w3-display-topright">&times;</span>
                        <h2>Employment Information</h2>
                      </header>
                      <div class="w3-container">
                        <p id="loadingIcon" style="display: none;"><i class="fa fa-refresh w3-spin" style="font-size:64px"></i></p>
                        <select class="w3-select w3-border" id="selectJob" name="selectJob" style="width: 50%; margin-bottom: 2%; margin-top: 2%; display: none;">
                            <option value="" disabled selected>Select Job</option>
                            <option value="1">Error - Data not loaded</option>
                            <option value="2">Error - Data not loaded</option>
                        </select>
                        <select class="w3-select w3-border" id="selectOffice" name="selectOffice" style="width: 50%; margin-bottom: 2%; display: none;">
                            <option value="" disabled selected>Select Office</option>
                            <option value="1">Error - Data not loaded</option>
                            <option value="2">Error - Data not loaded</option>
                        </select>
                        <button onclick="CreateNewEmployee()" class="w3-btn w3-teal">Submit</button>
                      </div>
                    </div>
                </div>
            </div>
        </div>
                
        


    </div>

    <script src="createEmployeeScripts.js"></script>
    <script>
        //updateExtensionCodes();
        function w3_open() {
            document.getElementById("mySidebar").style.display = "block";
        }
 
        function w3_close() {
            document.getElementById("mySidebar").style.display = "none";
        }
        function EmployeeInfo()
        {
           // console.log("This has worked");
            if (checkEmptyFields()) {
                if(validateInput())
                {
                    document.getElementById('id01').style.display = 'block';
                    document.getElementById('loadingIcon').style.display = 'block'; // Show spinning icon
                    getAllJobs()
                    .then(() => getAllOffices())
                    .finally(() => {
                    document.getElementById('loadingIcon').style.display = 'none'; // Hide spinning icon on response
                    document.querySelector('select[name="selectJob"]').style.display = 'block'; // Show selectJob
                    document.querySelector('select[name="selectOffice"]').style.display = 'block'; // Show selectOffice
                });
                }
            } 
        }
        function CreateNewEmployee()
        {
            //Recheck empty fields to make sure user has selected an option for office and job
            if(isOfficeAndJobSelected())
            {
                POSTData();
            }
            
            
        }

        function updateExtensionCodes() {
            var internationalExtensionCodes = ['USA, +1', 'UK, +44', 'India, +91', 'Japan, +81', 'China, +86', 'Poland, +48'];
            var selectElement = document.getElementById('pExtension');

            // Clear existing options
            selectElement.innerHTML = '<option value="" disabled selected></option>';

            // Add new options based on the provided extension codes array
            internationalExtensionCodes.forEach(function (code) {
                var option = document.createElement('option');
                option.value = code;
                option.textContent = code;
                selectElement.appendChild(option);
            });
    }

        
    </script>
</body>
</html>