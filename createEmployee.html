<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="baseStyle.css">
    <link rel="stylesheet" href="navCSS.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://kit.fontawesome.com/13f35877d6.js" crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<body class="w3-light-grey">
<!-- Burger Menu -->
<div class="w3-bar w3-teal" id="burgerMenu">
    <button class="w3-bar-item w3-button w3-xlarge w3-hover-none w3-hover-text-light-grey" onclick="w3_open()"><i class="fa-solid fa-bars"></i></button>
  </div>
  
  <!-- Sidebar (hidden by default) -->
  <nav class="w3-sidebar w3-bar-block w3-card w3-top w3-large w3-animate-left" style="display:none;z-index:9999;width:10%;min-width:300px;" id="mySidebar">
    <div class="w3-bar w3-teal" style="height: 15%;">
      <button class="w3-bar-item w3-button w3-xlarge w3-hover-none w3-hover-text-light-grey" onclick="w3_close()"><i class="fa-solid fa-arrow-left"></i></button>
    </div>
  
    <!-- Manage Employees dropdown -->
    <a href="EmployeeList.html" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-text-teal">Employee List</a>
    <a href="createEmployee.html" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-text-teal">Add Employee</a>
    <a href="generateContent.html" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-text-teal">Generate Content</a>
    <a href="#about" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-text-teal">About</a>
  </nav>
  


    <!-- Page Container -->
    <div class="w3-content w3-margin-top" style="max-width:1400px; padding-bottom: 10%;" onclick="w3_close()">
        <div class="w3-container w3-card w3-teal">
            <h1>New Employee</h1>
        </div>
        <div class="w3-white w3-text-grey w3-card-4">
            <div class="w3-container">
                <h2 class="w3-text-grey w3-padding-16"><i class="fa fa-user fa-fw w3-margin-right w3-xxlarge w3-text-teal"></i>Personal Info</h2>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter First Name" id="fName" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter Last Name" id="lName" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="date" id="DOB" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter Phone Number" id="pNumber" style="width: 50%; margin-bottom: 2%;" required>
                <hr>
                <h2 class="w3-text-grey w3-padding-16"><i class="fa fa-home fa-fw w3-margin-right w3-xxlarge w3-text-teal"></i>Home Address</h2>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter House Number" id="houseNum" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter Street Name" id="Street" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter Postcode" id="Postcode" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter City" id="City" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter Country" id="Country" style="width: 50%; margin-bottom: 2%;" required>
                <hr>
                <h2 class="w3-text-grey w3-padding-16"><i class="fa fa-heartbeat fa-fw w3-margin-right w3-xxlarge w3-text-teal"></i>Emergency Contact</h2>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter First Name" id="emergFName" style="width: 50%; margin-bottom: 2%;" required>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter Last Name" id="emergLName" style="width: 50%; margin-bottom: 2%;" required>
                <select class="w3-select w3-border" name="relationship" style="width: 50%; margin-bottom: 2%;" required>
                    <option value="" disabled selected>Select Relationship</option>
                    <option value="1">Father</option>
                    <option value="2">Mother</option>
                    <option value="3">Partner</option>
                    <option value="4">Wife</option>
                    <option value="5">Husband</option>
                    <option value="6">Other</option>
                  </select>
                <input class="w3-input w3-border w3-animate-input" type="text" placeholder="Enter Phone Number" id="emergPNumber" style="width: 50%; margin-bottom: 2%;" required>
                <hr>
                <button onclick="EmployeeInfo()" class="w3-btn w3-teal">Continue</button>

                <div id="id01" class="w3-modal">
                    <div class="w3-modal-content w3-card-4">
                      <header class="w3-container w3-teal"> 
                        <span onclick="document.getElementById('id01').style.display='none'" class="w3-button w3-display-topright">&times;</span>
                        <h2>Employment Information</h2>
                      </header>
                      <div class="w3-container">
                        <p id="loadingIcon" style="display: none;"><i class="fa fa-refresh w3-spin" style="font-size:64px"></i></p>
                        <select class="w3-select w3-border" id="selectJob" name="selectJob" style="width: 50%; margin-bottom: 2%; margin-top: 2%; display: none;">
                            <option value="" disabled selected>Select Job</option>
                            <option value="1">Error - Data not loaded</option>
                            <option value="2">Error - Data not loaded</option>
                        </select>
                        <select class="w3-select w3-border" id="selectOffice" name="selectOffice" style="width: 50%; margin-bottom: 2%; display: none;">
                            <option value="" disabled selected>Select Office</option>
                            <option value="1">Error - Data not loaded</option>
                            <option value="2">Error - Data not loaded</option>
                        </select>
                        <button onclick="CreateNewEmployee()" class="w3-btn w3-teal">Submit</button>
                      </div>
                    </div>
                  </div>
            </div>
        </div>
                
        


    </div>

    <script src="createEmployeeScripts.js"></script>
    <script>
        function w3_open() {
            document.getElementById("mySidebar").style.display = "block";
        }
 
        function w3_close() {
            document.getElementById("mySidebar").style.display = "none";
        }
        function EmployeeInfo()
        {
            console.log("This has worked");
            if (checkEmptyFields()) {
                document.getElementById('id01').style.display = 'block';
                document.getElementById('loadingIcon').style.display = 'block'; // Show spinning icon
                getAllJobs()
                .then(() => getAllOffices())
                .finally(() => {
                    document.getElementById('loadingIcon').style.display = 'none'; // Hide spinning icon on response
                    document.querySelector('select[name="selectJob"]').style.display = 'block'; // Show selectJob
                    document.querySelector('select[name="selectOffice"]').style.display = 'block'; // Show selectOffice
                });
            } 
        }
        function CreateNewEmployee()
        {
            //Recheck empty fields to make sure user has selected an option for office and job
            if(isOfficeAndJobSelected())
            {
                POSTData();
            }
            
            
        }

        
    </script>
</body>
</html>